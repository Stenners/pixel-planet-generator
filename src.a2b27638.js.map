{"version":3,"sources":["src/utils/perlin_noise.js","src/utils/rng.js","src/index.js"],"names":["shuffle","array","rng","end","length","i","temp","Math","round","unit","PerlinNoise","seed","permutation","Array","p","prototype","noise","x","y","z","X","floor","Y","Z","u","fade","v","w","A","AA","AB","B","BA","BB","result","lerp","grad","t","a","b","hash","h","RNG","getSeed","c","m","pow","s","charCodeAt","ctx","document","getElementsByTagName","getContext","seedField","getElementById","pixelSizeField","randomButton","mouseDown","justReleasedMouse","mousePos","mouseDiff","addEventListener","e","generate","randomSeed","window","clientX","clientY","map","a1","a2","b1","b2","setColor","data","r","g","pixelSize","xx","yy","generateRedTypePlanet","n","texture_data","heightmap_width","generateEarthTypePlanet","generateGasTypePlanet","withAsteroids","asteroidColors","asteroids","orbitRadius","orbitAngle","numAsteroids","orbitInclinationAngle","heightmap_height","dphi","planetRotationDiff","rotationMomentum","radius","planetType","RED_TYPE","EARTH_TYPE","GAS_TYPE","imageData","createImageData","stars","ceil","random","String","fromCharCode","value","id","wait","clearTimeout","setTimeout","parseInt","orbitRadiusInner","orbitRadiusOuter","diffRadius","PI","angle","rad","cos","sin","size","push","phi","theta","abs","zz","amplitude","frequency","o","console","log","putImageData","animate","fillStyle","fillRect","orbitAnglePerFrame","astXYZ","asteroid","astX","astZ","astY","render_planet","requestAnimationFrame","canvas_data","x1","x2","angle1","angle2"],"mappings":"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AAiBzD,CAAjB,CAA9B;AEMAoD,AFLA,ACbE,ECkBFA,SAAS,EDlBAV,CCkBG,ADlBV,KCkBF;AACAW,AFLD,ACbE,ECkBDA,iBAAiB,GAAG,IAApB;AACD,CAHD;AAKAO,AFNAvD,MEMM,CAACmD,IFNI,CAAC9C,SAAZ,EEMA,CAAwB,AFNA,WEMxB,EAAqC,UAAU+C,CAAV,EAAa;AAChDF,AFLD5C,EEKC4C,AFLD5C,KAAK,EAAE,EEKG,CAACC,CAAV,GAAc6C,CAAC,CAACI,MFLAjD,CEKF,AFLR,EAAaC,AChBZ,CCqBmByC,AFLpB,EAAgBxC,CAAhB,EAAmB,GEKS,CAACF,CAAnC;AACA2C,AFLA,AChBE,ECqBFA,MFLIxC,CAAC,EEKI,ADrBFT,CCqBGO,AFLFX,CEKR,EDrBE,CCqBYuD,AFLF,CEKG,AFLFzC,CEKG8C,ADrBF,CAAC,GDgBP,CAAWlD,CAAX,AChBYqB,CCqBN,ADrBC,GCqBWqB,AFLF,AChBA,GDgBxB,EChB6BhD,GCqBK,CAACO,ADrBpB,CCqBf,EDrBoC,KAAK0B,CAA3B,IAAgC,KAAKC,CAAjD;ACsBFc,AFLA,AChBE,ECqBFA,MFLIrC,CAAC,CEKG,CAACL,CAAT,AFLQV,CChBC,ECqBIuD,CAAC,AFLF,CEKGI,AFLF7C,CChBCV,IDgBN,AChBC,CDgBUO,CEKnB,AFLQ,EChBc,EDgBE,GAAxB,AChB2B2B,CAAL,GAAS,CAAtB,CAAP;ACsBFc,AFLA,AChBC,ECqBDA,MFLIpC,CAAC,CEKG,CAACL,CAAT,AFLQX,GEKKuD,CAAC,AFLF,CEKGK,AFLF9C,KAAL,CAAWF,CEKnB,AFLQ,IAAgB,GAAxB;AEMD,AFJCF,CEDF,GFCEA,CAAC,IAAIV,IAAI,CAACc,KAAL,CAAWJ,CAAX,CAAL;AACAC,IAAAA,CAAC,IAAIX,IAAI,CAACc,KAAL,CAAWH,CAAX,CAAL;AEKF,AFJEC,IAAAA,CAAC,IEIMiD,AFJF7D,GEIP,CAAaqC,AFJF,CEIX,AFJYvB,EEIIgD,EAAhB,CFJO,CEIaC,AFJFnD,CAAX,CEIP,AFJE,EEIsBoD,EAAxB,EAA4BC,EAA5B,EAAgC;AAC9B,AFHA,QAAIhD,CEGG+C,AFHF,EEGI,CFHD,EEGK,CAAC3B,CAAC,CFHFnB,EEGK4C,EAAL,AFHL,CAAUpD,CAAV,CAAR,EEGyBqD,EAAE,GAAGD,EAAjB,CAAD,IAA0BG,EAAE,GAAGD,EAA/B,CAAZ;AACD,AFHC,QAAI7C,CAAC,GAAG,KAAKD,IAAL,CAAUP,CAAV,CAAR;AACA,QAAIS,CAAC,GAAG,GCrBKe,EDqBAjB,IAAL,CAAUN,CAAV,CAAR;AEIF,AFFE,QAAIS,CEEG6C,AFFF,GAAG,KEEV,AFFe3D,CEEG4D,AFFR,CAAOtD,CAAP,EEEV,EAAwBH,AFFFK,CEEtB,AFFE,EEEyBJ,CAA3B,EAA8BS,CAA9B,EAAiCgD,CAAjC,EAAoCC,CAApC,EAAuCrC,CAAvC,EAA0CD,CAA1C,EAA6CuC,SAA7C,EAAwD;AACtDA,AFHA,EEGAA,MFHuBhD,EAAE,CEGhB,EFHmB,CEGhBgD,IFHqB/D,CAAL,CAAOc,CAAP,EEGP,EFHmBL,CAAxC,CEGyB,CAAzB;AFHA,QAA2CO,EAAE,GAAG,KAAKhB,CAAL,CAAOc,CAAC,GAAG,CAAX,IAAgBL,CAAhE;AEIA,AFJA,OEIK,CFHJQ,CAAC,EEGO+C,CFHJ,CEGM,GAAG7D,CAAd,AFHUH,CAAL,CEGYgE,AFHL1D,CAAC,CEGM,EFHH,CEGMH,AFHjB,CEGkB,GAAG4D,AFHLvD,CADrB,QEIA,EAAqCwD,EAAE,EAAvC,EAA2C;AACzC,AFLF,QACwB9C,CEIjB,CFJmB,GEIf+C,AFJkB,EEIhB,GAAG7D,AFJkBJ,CEIhC,AFJ2B,CAAOiB,CEIjBgD,AFJU,EEIR,EFJoBxD,CEIjBL,AFLxB,CEKyB,GAAG2D,SAA1B,EAAqCE,EAAE,EAAvC,EAA2C;AACzCL,AFNJ,MEMIA,EFLwCzC,EEKpC,AFLsC,CEKrC,CAAC6C,CFLuC,CEKrC,GAAGC,CFLuCjE,CEKrC,AFLgC,CAAOiB,CAAC,CEKrCJ,CAAX,CFLmD,CAAX,EEKxB,CAAjB,CAAJ,AFL6DJ,CADjE,EEM8BoD,CAA1B;AACAD,AFJJ,MEIIA,EFJAxC,EEII,CAAC,CAAC4C,EAAE,AFJF,GEIKC,AFJF,EEII,GAAGpD,AFJFQ,CEIT,GFJI,CEIY,AFJFR,CEId,AFJI,EAAa,CEIG,CAArB,CAAJ,EFJ2BQ,CEIGyC,CAA9B,EFJsB,CAAUlD,CAAV,EAAa,KAAKS,IAAL,CAAUX,CAAV,EAAa,KAAKY,IAAL,CAAU,KAAKtB,CAAL,CAAOe,EAAP,CAAV,EAAsBZ,CAAtB,EAAyBC,CAAzB,EAA4BC,CAA5B,CAAb,EAA6C,KAAKiB,IAAL,CAAU,KAAKtB,CAAL,CAAOkB,EAAP,CAAV,EAAsBf,CAAC,GAAG,CAA1B,EAA6BC,CAA7B,EAAgCC,CAAhC,CAA7C,CAAb,EACzB,KAAKgB,IAAL,CAAUX,CAAV,EAAa,KAAKY,IAAL,CAAU,KAAKtB,CAAL,CAAOgB,EAAP,CAAV,EAAsBb,CAAtB,EAAyBC,CAAC,GAAG,CAA7B,EAAgCC,CAAhC,CAAb,EAAiD,KAAKiB,IAAL,CAAU,KAAKtB,CAAL,CAAOmB,EAAP,CAAV,EAAsBhB,CAAC,GAAG,CAA1B,EAA6BC,CAAC,GAAG,CAAjC,EAAoCC,CAApC,CAAjD,CADyB,CAAb,EAEZ,KAAKgB,IAAL,CAAUT,CAAV,EAAa,KAAKS,IAAL,CAAUX,CAAV,EAAa,KAAKY,IAAL,CAAU,KAAKtB,CAAL,CAAOe,EAAE,GAAG,CAAZ,CAAV,EAA0BZ,CAA1B,EAA6BC,CAA7B,EAAgCC,CAAC,GAAG,CAApC,CAAb,EAAqD,KAAKiB,IAAL,CAAU,KAAKtB,CAAL,CAAOkB,EAAE,GAAG,CAAZ,CAAV,EAA0Bf,CAAC,GAAG,CAA9B,EAAiCC,CAAjC,EAAoCC,CAAC,GAAG,CAAxC,CAArD,CAAb,EACC,KAAKgB,IAAL,CAAUX,CAAV,EAAa,KAAKY,IAAL,CAAU,KAAKtB,CAAL,CAAOgB,EAAE,GAAG,CAAZ,CAAV,EAA0Bb,CAA1B,EAA6BC,CAAC,GAAG,CAAjC,EAAoCC,CAAC,GAAG,CAAxC,CAAb,EAAyD,KAAKiB,IAAL,CAAU,KAAKtB,CAAL,CAAOmB,EAAE,GAAG,CAAZ,CAAV,EAA0BhB,CAAC,GAAG,CAA9B,EAAiCC,CAAC,GAAG,CAArC,EAAwCC,CAAC,GAAG,CAA5C,CAAzD,CADD,CAFY,CAAb;AEKIuD,AFAJ,MEAIA,IAAI,CAAC,AFAFxC,CEAG4C,EAAE,GAAGC,AFAf,EEAiB,GAAGpD,CAAX,IAAgB,CAAhB,GAAoB,CAArB,CAAJ,GAA8BY,CAA9B;AACAmC,AFAJ,GAxBsB,GEwBlBA,IAAI,CAAC,CAACI,EAAE,GAAGC,EAAE,GAAGpD,CAAX,IAAgB,CAAhB,GAAoB,CAArB,CAAJ,GAA8BW,CAA9B;AACD,AFCJH,EAAAA,IAAI,EAAE,cAAUE,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmB;AEAvB,AFCD,WAAOD,CAAC,GAAGD,CAAC,IAAIE,CAAC,GAAGD,CAAR,CAAZ;AEAD,AFCC,GA5BsB;AA8BvBb,EAAAA,IAAI,EAAE,cAAUY,CAAV,EAAa;AEDpB,AFEE,SEFO2C,EFEA3C,CAAC,GAAGA,CAAJ,GAAQA,CAAR,IAAaA,CAAC,IAAIA,CEF3B,AFE4B,CEFG4C,CAA/B,CFE+B,CEFGC,AFEP,GAAQ,EAAZ,CAAD,GAAmB,EAAhC,CEFT,AFEE,EEF8CjE,CAAhD,EAAmDC,CAAnD,EAAsDiE,eAAtD,EAAuEN,SAAvE,EAAkF;AAChF,AFEA,GAhCsB,GE8BlBI,CAAC,GAAG,GAAR,EAAa;AACXA,AFGH7C,EAAAA,EEHG6C,CAAC,CFGA,EEHGA,AFGD,CEHE,GAAG,GAAJ,GAAU,GAAV,CFGSzC,EEHOyC,CAApB,CADW,AFIR,CEHoB,CFGJhE,CAAhB,EAAmBC,CAAnB,EAAsBC,CAAtB,EAAyB;AAC9B,QAAIsB,CAAC,GAAGD,IAAI,GAAG,EAAf;AEHEiC,IAAAA,QAAQ,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsCF,CAAtC,EAAyC1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,GAAf,CAAzC,EAA8D1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAA9D,EAAiFA,CAAjF,EAAoFJ,SAApF,CAAR;AACD,AFID,GEPA,MAGO,GFICpC,CEJGwC,AFIX,CEJY,GAAG,GAAR,EACLR,QAAQ,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsC5E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,GAAf,CAAtC,EAA2D1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,GAAf,CAA3D,EAAgF1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAAhF,EAAmGA,CAAnG,EAAsGJ,SAAtG,CAAR,CADK,KAGLJ,QAAQ,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsCF,CAAtC,EAAyC1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAAzC,EAA4D1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAA5D,EAA+EA,CAA/E,EAAkFJ,SAAlF,CAAR;AACH,AFCE,WAAK,CAAL;AACC,eAAO5D,CAAC,GAAGC,CAAX;AEAJ,SAASkE,uBAAT,CAAiCH,CAAjC,EAAoCC,YAApC,EAAkDjE,CAAlD,EAAqDC,CAArD,EAAwDiE,eAAxD,EAAyEN,SAAzE,EAAoF;AAClF,AFAC,MEAGI,CAAC,GAAG,CFAF,CAAL,CEAD,EAAa;AACXA,AFAA,IEAAA,CAAC,GAAGA,CAAC,GAAG,EAAJ,CFAGhE,CAAC,CEAK,EAAT,AFAOC,CAAX,EEAkB+D,CAAlB,CADW,CACU;AACrB;AFAD,WAAK,CAAL;AECCR,AFAA,IEAAA,QAAQ,CAACS,EFAF,CAACjE,CAAD,GAAKC,CAAZ,IEAQ,EAAeD,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsC,EAAtC,EAA0C,GAA1C,EAA+C,GAA/C,EAAoDF,CAApD,EAAuDJ,SAAvD,CAAR;AACD,GAJD,CAKA;AACA,AFFC,WAAK,CAAL;AEGD,AFFE,eAAO,CAAC5D,CAAD,GAAKC,CAAZ;AEGF;AARA,AFMC,OEGI,IFHC,CAAL;AEIC,AFHA,eAAOD,CAAC,GAAGE,CAAX;AEIA;AACAsD,AFJD,MEICA,KFJI,CAAL,EEIS,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsC,GAAtC,EAA2C,GAA3C,EAAgD,GAAhD,EAAqDF,CAArD,EAAwDJ,SAAxD,CAAR;AACD,AFJC,eAAO5D,CAAC,GAAGE,CAAX;AEKH;AFJE,WAAK,CAAL;AEMH,AFLI,SEKKkE,MFLE,CAACpE,CAAD,GAAKE,CAAZ,SEKJ,CAA+B8D,CAA/B,EAAkCC,YAAlC,EAAgDjE,CAAhD,EAAmDC,CAAnD,EAAsDiE,eAAtD,EAAuEN,SAAvE,EAAkF;AAChF,MAAII,CAAC,GAAG,GAAR,EAAa;AACXA,AFND,IEMCA,CAAC,GAAGA,CAAC,EFND,CEMI,AFNT,GEMK,GAAU,GAAV,GAAgBA,CAApB,CADW,CACY;AFLvB,eAAO,CAAChE,CAAD,GAAKE,CAAZ;AEMAsD,IAAAA,QAAQ,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsC5E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAAtC,EAAyD1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAAzD,EAA4EA,CAA5E,EAA+EA,CAA/E,EAAkFJ,SAAlF,CAAR;AACD,AFNA,GEGD,MAKEJ,EFRI,CAAL,KEQS,CAACS,YAAD,EAAejE,CAAf,EAAkBC,CAAlB,EAAqBiE,eAArB,EAAsC5E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,CAAf,CAAtC,EAAyD1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,GAAf,CAAzD,EAA8EA,CAA9E,EAAiFA,CAAjF,EAAoFJ,SAApF,CAAR;AACH,AFRG,eAAO3D,CAAC,GAAGC,CAAX;;AEUJ,AFTG,IESCjB,GAAJ,IFTQ,CAAL;AEWH,AFVI,IEUAoF,WFVOpE,CAAC,CEUZ,EFVeC,CAAX;AEYJ,IAAIoE,cAAc,GAAG,CAAC,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CAAD,EAAgB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAAhB,EAA8B,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAA9B,CAArB;AACA,AFZG,IEYCC,OFZI,EEYR,AFZG;AEaH,AFZI,IEYAC,WAAJ,AFZW,CAACvE,CAAD,GAAKC,CAAZ;AEaJ,IAAIuE,UAAJ;AACA,AFbG,IEaCC,OFbI,EAAL,GEaH;AACA,AFbI,IEaAC,WFbO,CAAC1E,CAAD,GAAKC,CAAZ,IEaJ;AAEA,IAAIgE,eAAe,GAAG,GAAtB;AACA,AFfG,IEeCU,OFfI,EAAL,OEeiB,GAAG,GAAvB;AAEA,AFhBI,IEgBAC,IAAI,GAAG,GAAX,CFhBW7E,CAAC,GAAGC,CAAX;AEiBJ,IAAI6E,kBAAJ;AACA,AFjBG,IEiBCC,OFjBI,EAAL,OEiBiB,GAAG,GAAvB;AAEA,AFlBI,IEkBAC,MAAM,GAAG,EFlBFhF,CEkBX,AFlBY,GAAGC,CAAX;AEmBJ,IAAIgF,UAAJ;AACA,AFnBG,IEmBCC,OFnBI,CEmBI,CFnBT,EEmBY,CAAf;AAAA,AFlBI,IEkBcC,UAAU,CFlBjB,CAACnF,CEkBmB,AFlBpB,CEkBX,EFlBgBC,CAAZ;AEkBJ,IAAkCmF,QAAQ,GAAG,CAA7C;AACA,AFlBG,IEkBCrF,KAAJ,EFlBQ,EAAL;AEmBH,AFlBI,IEkBAsF,SAAS,EFlBF,CEkBKrD,AFlBJhC,CAAD,EEkBQ,CAACsF,AFlBJrF,CAAZ,cEkBY,CAAoBiE,eAApB,EAAqCU,gBAArC,CAAhB;AACA,AFnDE,IEmDEX,YAAY,GAAGoB,SAAS,CAAC5B,IAA7B;AAEA,AFnBE,IEmBE8B,KAAJ;AAEAzC,AF5FwB,CAAxB,OE4FQ,CAAC,KAAD,CAAR;eFjBerD;AEmBf,SAASsD,UAAT,GAAsB;AACpB;AACA,MAAIiB,CAAC,GAAG1E,IAAI,CAACkG,IAAL,CAAUlG,IAAI,CAACmG,MAAL,KAAgB,EAA1B,CAAR;AACA,MAAI/F,IAAI,GAAG,EAAX;;AAEA,OAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4E,CAApB,EAAuB5E,CAAC,EAAxB,EAA4B;AAC1B;AACAM,IAAAA,IAAI,IAAIgG,MAAM,CAACC,YAAP,CAAoBrG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACmG,MAAL,MAAiB,MAAM,EAAvB,CAAX,IAAyC,EAA7D,CAAR;AACD;;AAEDrD,EAAAA,SAAS,CAACwD,KAAV,GAAkBlG,IAAlB;AACAoD,EAAAA,QAAQ;AACT;;AAED,IAAI+C,EAAE,GAAG,IAAT;;AAEA,SAAS/C,QAAT,CAAkBgD,IAAlB,EAAwB;AACtB,MAAIA,IAAJ,EAAU;AACR,QAAID,EAAE,KAAK,IAAX,EACE7C,MAAM,CAAC+C,YAAP,CAAoBF,EAApB;AAEFA,IAAAA,EAAE,GAAG7C,MAAM,CAACgD,UAAP,CAAkB,YAAY;AACjClD,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,KAFI,EAEF,GAFE,CAAL;AAIA;AACD;;AAED,MAAMpD,IAAI,GAAG0C,SAAS,CAACwD,KAAvB;AACA,MAAM3G,GAAG,GAAG,IAAIwC,YAAJ,CAAQ/B,IAAR,CAAZ;AACA,MAAMkE,SAAS,GAAGqC,QAAQ,CAAC3D,cAAc,CAACsD,KAAhB,CAAR,IAAkC,CAApD;AAEAvB,EAAAA,aAAa,GAAG,KAAhB;;AACA,MAAIpF,GAAG,CAACO,IAAJ,KAAa,GAAjB,EAAsB;AACpB6E,IAAAA,aAAa,GAAG,IAAhB;AACD;;AAEDE,EAAAA,SAAS,GAAG,EAAZ;AACA,MAAI2B,gBAAgB,GAAGjH,GAAG,CAACO,IAAJ,KAAa,GAAb,GAAmB,GAA1C;AACA,MAAI2G,gBAAgB,GAAGD,gBAAgB,GAAG,EAA1C;AACA,MAAIE,UAAU,GAAGD,gBAAgB,GAAGD,gBAApC;AACAzB,EAAAA,UAAU,GAAG,GAAb;AACAC,EAAAA,YAAY,GAAGzF,GAAG,CAACO,IAAJ,KAAa,GAAb,GAAmB,EAAlC;AACAmF,EAAAA,qBAAqB,GAAG,CAAC1F,GAAG,CAACO,IAAJ,EAAD,GAAcF,IAAI,CAAC+G,EAAnB,GAAwB,IAAhD;;AAEA,MAAIhC,aAAJ,EAAmB;AACjB,SAAK,IAAIhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqD,YAApB,EAAkCrD,CAAC,EAAnC,EAAuC;AACrC,UAAIiF,KAAK,GAAGrH,GAAG,CAACO,IAAJ,KAAaF,IAAI,CAAC+G,EAAlB,GAAuB,GAAnC;AACA,UAAIE,GAAG,GAAGL,gBAAgB,GAAGjH,GAAG,CAACO,IAAJ,KAAa4G,UAA1C;AACA,UAAIpG,CAAC,GAAGuG,GAAG,GAAGjH,IAAI,CAACkH,GAAL,CAASF,KAAT,CAAd;AAAA,UACErG,CAAC,GAAG,CAAChB,GAAG,CAACO,IAAJ,KAAa,GAAb,GAAmB,GAApB,IAA2B,IADjC;AAAA,UAEEU,CAAC,GAAGqG,GAAG,GAAGjH,IAAI,CAACmH,GAAL,CAASH,KAAT,CAFZ;AAAA,UAGE3E,CAAC,GAAGrC,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAJ,KAAa,CAAxB,CAHN;AAAA,UAIEkH,IAAI,GAAGpH,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAJ,KAAa,CAAb,GAAiB,CAA5B,CAJT;AAMA+E,MAAAA,SAAS,CAACoC,IAAV,CAAe,CAAC3G,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAUoG,KAAV,EAAiBhC,cAAc,CAAC3C,CAAD,CAAd,CAAkB,CAAlB,CAAjB,EAAuC2C,cAAc,CAAC3C,CAAD,CAAd,CAAkB,CAAlB,CAAvC,EAA6D2C,cAAc,CAAC3C,CAAD,CAAd,CAAkB,CAAlB,CAA7D,EAAmF+E,IAAnF,CAAf;AACD;AACF;;AAGD5B,EAAAA,kBAAkB,GAAG7F,GAAG,CAACO,IAAJ,KAAa,IAAlC;AACAO,EAAAA,KAAK,GAAG,IAAIN,qBAAJ,CAAgB,IAAIgC,YAAJ,CAAQ/B,IAAR,CAAhB,CAAR;AAEAuF,EAAAA,UAAU,GAAG3F,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAJ,KAAa,CAAxB,CAAb;;AAEA,OAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkE,eAApB,EAAqClE,CAAC,IAAI4D,SAA1C,EAAqD;AACnD,SAAK,IAAI3D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2E,gBAApB,EAAsC3E,CAAC,IAAI2D,SAA3C,EAAsD;AACpD,UAAIgD,GAAG,GAAGzD,GAAG,CAACnD,CAAD,EAAI,CAAJ,EAAOkE,eAAe,GAAG,CAAzB,EAA6B,MAAM,GAAP,GAAc5E,IAAI,CAAC+G,EAAnB,GAAwBxB,IAApD,EAA0D,CAACvF,IAAI,CAAC+G,EAAN,GAAW,GAAX,GAAiBxB,IAA3E,CAAb;AAAA,UACEgC,KAAK,GAAG1D,GAAG,CAAClD,CAAD,EAAI,CAAJ,EAAO2E,gBAAgB,GAAG,CAA1B,EAA6BtF,IAAI,CAAC+G,EAAlC,EAAsC,CAAtC,CADb;AAEA,UAAIxC,EAAE,GAAGmB,MAAM,GAAG1F,IAAI,CAACwH,GAAL,CAASxH,IAAI,CAACmH,GAAL,CAASI,KAAT,CAAT,CAAT,GAAqCvH,IAAI,CAACkH,GAAL,CAASI,GAAT,CAA9C;AAAA,UACE9C,EAAE,GAAGkB,MAAM,GAAG1F,IAAI,CAACkH,GAAL,CAASK,KAAT,CADhB;AAAA,UAEEE,EAAE,GAAG/B,MAAM,GAAG1F,IAAI,CAACwH,GAAL,CAASxH,IAAI,CAACmH,GAAL,CAASI,KAAT,CAAT,CAAT,GAAqCvH,IAAI,CAACmH,GAAL,CAASG,GAAT,CAF5C;AAIA,UAAII,SAAS,GAAG,GAAhB;AAAA,UAAqBC,SAAS,GAAG,KAAjC;AAEA,UAAIjD,CAAC,GAAG,GAAR;;AACA,WAAK,IAAIkD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BlD,QAAAA,CAAC,IAAIgD,SAAS,GAAGjH,KAAK,CAACA,KAAN,CAAY8D,EAAE,GAAGoD,SAAjB,EAA4BnD,EAAE,GAAGmD,SAAjC,EAA4CF,EAAE,GAAGE,SAAjD,CAAjB;AACAD,QAAAA,SAAS,IAAI,GAAb;AACAC,QAAAA,SAAS,IAAI,GAAb;AACD;;AACDjD,MAAAA,CAAC,IAAI,GAAL;AACAA,MAAAA,CAAC,IAAI,GAAL;AACAA,MAAAA,CAAC,GAAG1E,IAAI,CAACC,KAAL,CAAWyE,CAAC,GAAG,GAAf,CAAJ;;AAEA,UAAIiB,UAAU,KAAKC,QAAnB,EAA6B;AAC3BnB,QAAAA,qBAAqB,CAACC,CAAD,EAAIC,YAAJ,EAAkBjE,CAAlB,EAAqBC,CAArB,EAAwBiE,eAAxB,EAAyCN,SAAzC,CAArB;AACD,OAFD,MAEO,IAAIqB,UAAU,KAAKE,UAAnB,EAA+B;AACpChB,QAAAA,uBAAuB,CAACH,CAAD,EAAIC,YAAJ,EAAkBjE,CAAlB,EAAqBC,CAArB,EAAwBiE,eAAxB,EAAyCN,SAAzC,CAAvB;AACD,OAFM,MAEA,IAAIqB,UAAU,KAAKG,QAAnB,EAA6B;AAClChB,QAAAA,qBAAqB,CAACJ,CAAD,EAAIC,YAAJ,EAAkBjE,CAAlB,EAAqBC,CAArB,EAAwBiE,eAAxB,EAAyCN,SAAzC,CAArB;AACD;AACF;AACF;;AAEDuD,EAAAA,OAAO,CAACC,GAAR,CAAYnC,UAAZ,EA/EsB,CAgFtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAjD,EAAAA,GAAG,CAACqF,YAAJ,CAAiBhC,SAAjB,EAA4B,CAA5B,EAA+B,CAA/B;AACD;;AAIDiC,OAAO,CAACrD,YAAD,EAAee,MAAf,CAAP;;AAEA,SAASsC,OAAT,CAAiBrD,YAAjB,EAA+Be,MAA/B,EAAuC;AACrChD,EAAAA,GAAG,CAACuF,SAAJ,GAAgB,OAAhB;AACAvF,EAAAA,GAAG,CAACwF,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,GAAnB,EAAwB,GAAxB;AAEA,MAAI9G,CAAC,GAAGwD,eAAR;AAAA,MACE1C,CAAC,GAAGoD,gBADN;AAEA,MAAIS,SAAS,GAAGrD,GAAG,CAACsD,eAAJ,CAAoB,GAApB,EAAyB,GAAzB,CAAhB;AACA,MAAI7B,IAAI,GAAG4B,SAAS,CAAC5B,IAArB,CAPqC,CASrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA,MAAIY,aAAJ,EAAmB;AACjB,QAAIoD,kBAAkB,GAAG,CAAC,IAA1B;AACA,QAAIC,MAAM,GAAG,EAAb;;AACA,SAAK,IAAIrG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,SAAS,CAACpF,MAA9B,EAAsCkC,CAAC,EAAvC,EAA2C;AACzC,UAAIsG,QAAQ,GAAGpD,SAAS,CAAClD,CAAD,CAAxB;AACA,UAAIuG,IAAI,GAAGD,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACkH,GAAL,CAAS/B,UAAT,CAAd,GAAqCkD,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACmH,GAAL,CAAShC,UAAT,CAA9D;AACA,UAAIoD,IAAI,GAAGF,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACmH,GAAL,CAAShC,UAAT,CAAd,GAAqCkD,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACkH,GAAL,CAAS/B,UAAT,CAA9D;AAEAmD,MAAAA,IAAI,GAAGtI,IAAI,CAACC,KAAL,CAAWqI,IAAX,IAAmB,GAA1B;AACA,UAAIE,IAAI,GAAGxI,IAAI,CAACC,KAAL,CAAWoI,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACkH,GAAL,CAAS7B,qBAAT,CAAd,GAAgDkD,IAAI,GAAGvI,IAAI,CAACmH,GAAL,CAAS9B,qBAAT,CAAlE,IAAqG,GAAhH;AACAkD,MAAAA,IAAI,GAAGvI,IAAI,CAACC,KAAL,CAAWoI,QAAQ,CAAC,CAAD,CAAR,GAAcrI,IAAI,CAACmH,GAAL,CAAS9B,qBAAT,CAAd,GAAgDkD,IAAI,GAAGvI,IAAI,CAACkH,GAAL,CAAS7B,qBAAT,CAAlE,CAAP;AAEA+C,MAAAA,MAAM,CAACf,IAAP,CAAYiB,IAAZ,EAAkBE,IAAlB,EAAwBD,IAAxB;AACD;;AACDpD,IAAAA,UAAU,IAAIgD,kBAAd;;AAEA,SAAK,IAAIpG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqG,MAAM,CAACvI,MAA3B,EAAmCkC,CAAC,IAAI,CAAxC,EAA2C;AACzC,UAAIqG,MAAM,CAACrG,CAAC,GAAG,CAAL,CAAN,GAAgB,CAApB,EAAuB;AACrBmC,QAAAA,QAAQ,CAACC,IAAD,EAAOiE,MAAM,CAACrG,CAAD,CAAb,EAAkBqG,MAAM,CAACrG,CAAC,GAAG,CAAL,CAAxB,EAAiC,GAAjC,EAAsCkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAAtC,EAA2DkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAA3D,EAAgFkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAAhF,EAAqG,GAArG,EAA0GkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAA1G,CAAR;AACD;AACF;AACF;;AAED0G,EAAAA,aAAa,CAACtE,IAAD,EAAOQ,YAAP,EAAqBe,MAArB,EAA6BtE,CAA7B,EAAgCc,CAAhC,EAAmC,CAAnC,EAAsCd,CAAtC,EAA0C,MAAM,GAAP,GAAcpB,IAAI,CAAC+G,EAA5D,EAAgE,CAAC/G,IAAI,CAAC+G,EAAN,GAAW,GAA3E,CAAb,CA5CqC,CA6CrC;AACA;AACA;;AAEA,MAAIhC,aAAJ,EAAmB;AACjB,SAAK,IAAIhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqG,MAAM,CAACvI,MAA3B,EAAmCkC,CAAC,IAAI,CAAxC,EAA2C;AACzC,UAAIqG,MAAM,CAACrG,CAAC,GAAG,CAAL,CAAN,IAAiB,CAArB,EAAwB;AACtBmC,QAAAA,QAAQ,CAACC,IAAD,EAAOiE,MAAM,CAACrG,CAAD,CAAb,EAAkBqG,MAAM,CAACrG,CAAC,GAAG,CAAL,CAAxB,EAAiC,GAAjC,EAAsCkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAAtC,EAA2DkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAA3D,EAAgFkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAAhF,EAAqG,GAArG,EAA0GkD,SAAS,CAAClD,CAAC,GAAG,CAAL,CAAT,CAAiB,CAAjB,CAA1G,CAAR;AACD;AACF;AACF;;AAEDW,EAAAA,GAAG,CAACqF,YAAJ,CAAiBhC,SAAjB,EAA4B,CAA5B,EAA+B,CAA/B;AAEAR,EAAAA,IAAI,IAAIC,kBAAkB,GAAGC,gBAA7B,CA3DqC,CA4DrC;;AACA,MAAIvC,SAAJ,EAAe;AACbqC,IAAAA,IAAI,IAAIlC,SAAS,CAAC3C,CAAV,GAAc,KAAtB;AACD,GA/DoC,CAgErC;AACA;AACA;AACA;;;AAEAgD,EAAAA,MAAM,CAACgF,qBAAP,CAA6B,YAAY;AACvCV,IAAAA,OAAO,CAACrD,YAAD,EAAee,MAAf,CAAP;AACD,GAFD;AAID;;AAED,SAAS+C,aAAT,CAAuBE,WAAvB,EAAoChE,YAApC,EAAkDe,MAAlD,EAA0DtE,CAA1D,EAA6Dc,CAA7D,EAAgE0G,EAAhE,EAAoEC,EAApE,EAAwEC,MAAxE,EAAgFC,MAAhF,EAAwF;AACtF,OAAK,IAAIrI,CAAC,GAAGkI,EAAb,EAAiBlI,CAAC,GAAGmI,EAArB,EAAyBnI,CAAC,EAA1B,EAA8B;AAC5B,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuB,CAApB,EAAuBvB,CAAC,EAAxB,EAA4B;AAC1B,UAAI2G,GAAG,GAAGzD,GAAG,CAACnD,CAAD,EAAIkI,EAAJ,EAAQC,EAAR,EAAYC,MAAM,GAAGvD,IAArB,EAA2BwD,MAAM,GAAGxD,IAApC,CAAb;AAAA,UACEgC,KAAK,GAAG1D,GAAG,CAAClD,CAAD,EAAI,CAAJ,EAAOuB,CAAC,GAAG,CAAX,EAAclC,IAAI,CAAC+G,EAAnB,EAAuB,CAAvB,CADb;AAGA,UAAI3C,CAAC,GAAGO,YAAY,CAAC,CAACjE,CAAC,GAAGC,CAAC,GAAGS,CAAT,IAAc,CAAf,CAApB;AAAA,UACEiD,CAAC,GAAGM,YAAY,CAAC,CAACjE,CAAC,GAAGC,CAAC,GAAGS,CAAT,IAAc,CAAd,GAAkB,CAAnB,CADlB;AAAA,UAEEY,CAAC,GAAG2C,YAAY,CAAC,CAACjE,CAAC,GAAGC,CAAC,GAAGS,CAAT,IAAc,CAAd,GAAkB,CAAnB,CAFlB;AAAA,UAGEW,CAAC,GAAG4C,YAAY,CAAC,CAACjE,CAAC,GAAGC,CAAC,GAAGS,CAAT,IAAc,CAAd,GAAkB,CAAnB,CAHlB;AAKA,UAAI6F,GAAG,GAAGvB,MAAV;AAEA,UAAI+B,EAAE,GAAGR,GAAG,GAAGjH,IAAI,CAACwH,GAAL,CAASxH,IAAI,CAACmH,GAAL,CAASI,KAAT,CAAT,CAAN,GAAkCvH,IAAI,CAACmH,GAAL,CAASG,GAAT,CAA3C;AAAA,UACE/C,EAAE,GAAGvE,IAAI,CAACC,KAAL,CAAWgH,GAAG,GAAGjH,IAAI,CAACwH,GAAL,CAASxH,IAAI,CAACmH,GAAL,CAASI,KAAT,CAAT,CAAN,GAAkCvH,IAAI,CAACkH,GAAL,CAASI,GAAT,CAA7C,IAA8D,GADrE;AAAA,UAEE9C,EAAE,GAAGxE,IAAI,CAACC,KAAL,CAAWgH,GAAG,GAAGjH,IAAI,CAACkH,GAAL,CAASK,KAAT,CAAjB,IAAoC,GAF3C;;AAGA,UAAIE,EAAE,IAAI,CAAV,EAAa;AACXvD,QAAAA,QAAQ,CAACyE,WAAD,EAAcpE,EAAd,EAAkBC,EAAlB,EAAsB,GAAtB,EAA2BJ,CAA3B,EAA8BC,CAA9B,EAAiCrC,CAAjC,EAAoC,GAApC,CAAR;AACD;AACF;AACF;AACF","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["function shuffle(array, rng) {\n\tvar end = array.length - 1;\n\tvar i;\n\tvar temp;\n\twhile (end > 0) {\n\t\ti = Math.round(rng.unit() * (end - 1));\n\t\ttemp = array[end];\n\t\tarray[end] = array[i];\n\t\tarray[i] = temp;\n\t\tend--;\n\t}\n}\n\n// Refactor to Class? \n\nfunction PerlinNoise(rng) {\n\tthis.seed = rng.seed;\n\tthis.permutation = new Array(256);\n\tthis.p = new Array(512);\n\tfor (var i = 0; i < 256; i++) {\n\t\tthis.permutation[i] = i;\n\t}\n\tshuffle(this.permutation, rng);\n\tfor (var i = 0; i < 256; i++) {\n\t\tthis.p[i] = this.p[i + 256] = this.permutation[i];\n\t}\n}\n\nPerlinNoise.prototype = {\n\n\tnoise: function (x, y, z) {\n\t\tvar X = Math.floor(x) & 255;\n\t\tvar Y = Math.floor(y) & 255;\n\t\tvar Z = Math.floor(z) & 255;\n\n\t\tx -= Math.floor(x);\n\t\ty -= Math.floor(y);\n\t\tz -= Math.floor(z);\n\n\t\tvar u = this.fade(x);\n\t\tvar v = this.fade(y);\n\t\tvar w = this.fade(z);\n\n\t\tvar A = this.p[X] + Y, AA = this.p[A] + Z, AB = this.p[A + 1] + Z,\n\t\t\tB = this.p[X + 1] + Y, BA = this.p[B] + Z, BB = this.p[B + 1] + Z;\n\n\t\tvar result = this.lerp(w, this.lerp(v, this.lerp(u, this.grad(this.p[AA], x, y, z), this.grad(this.p[BA], x - 1, y, z)),\n\t\t\tthis.lerp(u, this.grad(this.p[AB], x, y - 1, z), this.grad(this.p[BB], x - 1, y - 1, z))),\n\t\t\tthis.lerp(v, this.lerp(u, this.grad(this.p[AA + 1], x, y, z - 1), this.grad(this.p[BA + 1], x - 1, y, z - 1)),\n\t\t\t\tthis.lerp(u, this.grad(this.p[AB + 1], x, y - 1, z - 1), this.grad(this.p[BB + 1], x - 1, y - 1, z - 1))));\n\n\t\treturn result;\n\t},\n\n\tlerp: function (t, a, b) {\n\t\treturn a + t * (b - a);\n\t},\n\n\tfade: function (t) {\n\t\treturn t * t * t * (t * (t * 6 - 15) + 10);\n\t},\n\n\tgrad: function (hash, x, y, z) {\n\t\tvar h = hash & 15;\n\n\t\tswitch (h) {\n\t\t\tcase 0:\n\t\t\t\treturn x + y;\n\t\t\tcase 1:\n\t\t\t\treturn x - y;\n\t\t\tcase 2:\n\t\t\t\treturn -x + y;\n\t\t\tcase 3:\n\t\t\t\treturn -x - y;\n\t\t\tcase 4:\n\t\t\t\treturn x + z;\n\t\t\tcase 5:\n\t\t\t\treturn x - z;\n\t\t\tcase 6:\n\t\t\t\treturn -x + z;\n\t\t\tcase 7:\n\t\t\t\treturn -x - z;\n\t\t\tcase 8:\n\t\t\t\treturn y + z;\n\t\t\tcase 9:\n\t\t\t\treturn y - z;\n\t\t\tcase 10:\n\t\t\t\treturn -y + z;\n\t\t\tcase 11:\n\t\t\t\treturn -y - z;\n\t\t\tcase 12:\n\t\t\t\treturn x + y;\n\t\t\tcase 13:\n\t\t\t\treturn x - y;\n\t\t\tcase 14:\n\t\t\t\treturn -x + y;\n\t\t\tcase 15:\n\t\t\t\treturn -x - y;\n\t\t}\n\t}\n\n}\n\nexport default PerlinNoise;","class RNG {\n  constructor(seed) {\n    this.seed = this.getSeed(seed) * 394875498754986; //394875498754986 could be any big number\n    this.a = 16807;\n    this.c = 0;\n    this.m = Math.pow(2, 31) - 1;\n  }\n  getSeed(seed) {\n    var s = 34737;\n    for (var i = 0; i < seed.length; i++) {\n      s += (i + 1) * seed.charCodeAt(i);\n    }\n    return s;\n  }\n  unit() {\n    this.seed = (this.a * this.seed + this.c) % this.m;\n    return this.seed / (this.m - 1);\n  }\n}\n\nexport default RNG;\n","import PerlinNoise from './utils/perlin_noise';\nimport RNG from './utils/rng';\n\nvar ctx = document.getElementsByTagName(\"canvas\")[0].getContext(\"2d\");\nvar seedField = document.getElementById(\"seed_field\");\nvar pixelSizeField = document.getElementById(\"pixelSize_field\");\nvar randomButton = document.getElementById(\"random_btn\");\n\nvar mouseDown = false;\nvar justReleasedMouse = false;\nvar mousePos = { x: 0, y: 0 };\nvar mouseDiff = { x: 0, y: 0 };\n\nseedField.addEventListener(\"input\", function (e) {\n  generate(true);\n});\n\npixelSizeField.addEventListener(\"input\", function (e) {\n  generate(false);\n});\n\nrandomButton.addEventListener(\"click\", function (e) {\n  randomSeed()\n});\n\nwindow.addEventListener(\"mousedown\", function (e) {\n  mouseDown = true;\n});\n\nwindow.addEventListener(\"mouseup\", function (e) {\n  mouseDown = false;\n  justReleasedMouse = true;\n});\n\nwindow.addEventListener(\"mousemove\", function (e) {\n  mouseDiff.x = e.clientX - mousePos.x;\n  mouseDiff.y = e.clientY - mousePos.y;\n  mousePos.x = e.clientX;\n  mousePos.y = e.clientY;\n});\n\nfunction map(c, a1, a2, b1, b2) {\n  return b1 + ((c - a1) / (a2 - a1)) * (b2 - b1);\n}\n\nfunction setColor(data, x, y, w, r, g, b, a, pixelSize) {\n  pixelSize = pixelSize || 1;\n  for (var xx = x; xx < x + pixelSize; xx++) {\n    for (var yy = y; yy < y + pixelSize; yy++) {\n      data[(xx + yy * w) * 4] = r;\n      data[(xx + yy * w) * 4 + 1] = g;\n      data[(xx + yy * w) * 4 + 2] = b;\n      data[(xx + yy * w) * 4 + 3] = a;\n    }\n  }\n}\n\nfunction generateRedTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize) {\n  if (n < 150) {\n    n = n < 110 ? 110 : n;\t//So the earth is not too dark\n    setColor(texture_data, x, y, heightmap_width, n, Math.round(n * 0.6), Math.round(n / 2), n, pixelSize);\n  } else if (n < 210)\n    setColor(texture_data, x, y, heightmap_width, Math.round(n * 0.8), Math.round(n * 0.4), Math.round(n / 2), n, pixelSize);\n  else\n    setColor(texture_data, x, y, heightmap_width, n, Math.round(n / 2), Math.round(n / 3), n, pixelSize);\n}\n\nfunction generateEarthTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize) {\n  if (n < 140) {\n    n = n < 70 ? 70 : n;\t//So the water is not too dark\n    // setColor(texture_data, x, y, heightmap_width, 0, 0, n, n, pixelSize);\n    setColor(texture_data, x, y, heightmap_width, 64, 166, 246, n, pixelSize);\n  }\n  // else if (n < 180) {\n  //   // setColor(texture_data, x, y, heightmap_width, 214, 228, 189, n, pixelSize); \n  //    setColor(texture_data, x, y, heightmap_width, 167, 239, 112, n, pixelSize); \n  // } \n  else {\n    // setColor(texture_data, x, y, heightmap_width, n, n, n, n, pixelSize);\n    // setColor(texture_data, x, y, heightmap_width, 57, 183, 100, n, pixelSize);\n    setColor(texture_data, x, y, heightmap_width, 167, 239, 112, n, pixelSize); \n  }\n}\n\nfunction generateGasTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize) {\n  if (n < 210) {\n    n = n < 120 ? 120 : n;\t//So the gas is not too dark\n    setColor(texture_data, x, y, heightmap_width, Math.round(n / 3), Math.round(n / 2), n, n, pixelSize);\n  }\n  else\n    setColor(texture_data, x, y, heightmap_width, Math.round(n / 3), Math.round(n * 0.6), n, n, pixelSize);\n}\n\nvar rng;\n\nvar withAsteroids;\n\nvar asteroidColors = [[130, 72, 41], [96, 60, 39], [91, 73, 64]];\nvar asteroids;\nvar orbitRadius;\nvar orbitAngle;\nvar numAsteroids;\nvar orbitInclinationAngle;\n\nvar heightmap_width = 700;\nvar heightmap_height = 400;\n\nvar dphi = 0.0;\nvar planetRotationDiff;\nvar rotationMomentum = 0.0;\n\nvar radius = 100;\nvar planetType;\nvar RED_TYPE = 0, EARTH_TYPE = 1, GAS_TYPE = 2;\nvar noise;\nvar imageData = ctx.createImageData(heightmap_width, heightmap_height);\nvar texture_data = imageData.data;\n\nvar stars;\n\ngenerate(false);\n\nfunction randomSeed() {\n  //Size of the seed between 1 and 20 character\n  var n = Math.ceil(Math.random() * 20);\n  var seed = \"\";\n\n  for (var i = 0; i < n; i++) {\n    //Concatenate a character form '!' (code 33) to '~' (code 126)\n    seed += String.fromCharCode(Math.round(Math.random() * (126 - 33)) + 33);\n  }\n\n  seedField.value = seed;\n  generate();\n}\n\nvar id = null;\n\nfunction generate(wait) {\n  if (wait) {\n    if (id !== null)\n      window.clearTimeout(id);\n\n    id = window.setTimeout(function () {\n      generate(false);\n    }, 300);\n\n    return;\n  }\n\n  const seed = seedField.value;\n  const rng = new RNG(seed);\n  const pixelSize = parseInt(pixelSizeField.value) || 5;\n\n  withAsteroids = false;\n  if (rng.unit() < 0.5) {\n    withAsteroids = true;\n  }\n\n  asteroids = [];\n  var orbitRadiusInner = rng.unit() * 100 + 120;\n  var orbitRadiusOuter = orbitRadiusInner + 50;\n  var diffRadius = orbitRadiusOuter - orbitRadiusInner;\n  orbitAngle = 0.0;\n  numAsteroids = rng.unit() * 200 + 75;\n  orbitInclinationAngle = -rng.unit() * Math.PI / 10.0;\n\n  if (withAsteroids) {\n    for (var a = 0; a < numAsteroids; a++) {\n      var angle = rng.unit() * Math.PI * 2.0;\n      var rad = orbitRadiusInner + rng.unit() * diffRadius;\n      var x = rad * Math.cos(angle),\n        y = (rng.unit() * 2.0 - 1.0) * 10.0,\n        z = rad * Math.sin(angle),\n        c = Math.round(rng.unit() * 2),\n        size = Math.round(rng.unit() * 5 + 5);\n\n      asteroids.push([x, y, z, angle, asteroidColors[c][0], asteroidColors[c][1], asteroidColors[c][2], size]);\n    }\n  }\n\n\n  planetRotationDiff = rng.unit() * 0.03;\n  noise = new PerlinNoise(new RNG(seed));\n\n  planetType = Math.round(rng.unit() * 2);\n\n  for (var x = 0; x < heightmap_width; x += pixelSize) {\n    for (var y = 0; y < heightmap_height; y += pixelSize) {\n      var phi = map(x, 0, heightmap_width - 1, (3.0 / 2.0) * Math.PI + dphi, -Math.PI / 2.0 + dphi),\n        theta = map(y, 0, heightmap_height - 1, Math.PI, 0);\n      var xx = radius * Math.abs(Math.sin(theta)) * Math.cos(phi),\n        yy = radius * Math.cos(theta),\n        zz = radius * Math.abs(Math.sin(theta)) * Math.sin(phi);\n\n      var amplitude = 1.0, frequency = 0.014;\n\n      var n = 0.0;\n      for (var o = 0; o < 3; o++) {\n        n += amplitude * noise.noise(xx * frequency, yy * frequency, zz * frequency);\n        amplitude *= 0.5;\n        frequency *= 2.0;\n      }\n      n += 1.0;\n      n *= 0.5;\n      n = Math.round(n * 255);\n\n      if (planetType === RED_TYPE) {\n        generateRedTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize);\n      } else if (planetType === EARTH_TYPE) {\n        generateEarthTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize);\n      } else if (planetType === GAS_TYPE) {\n        generateGasTypePlanet(n, texture_data, x, y, heightmap_width, pixelSize);\n      }\n    }\n  }\n\n  console.log(planetType);\n  // stars = [];\n  // for (var x = 0; x < 700; x++) {\n  //   for (var y = 0; y < 700; y++) {\n  //     var r = rng.unit();\n  //     if (r < 0.0005) {\n  //       stars.push([x, y]);\n  //     }\n  //   }\n  // }\n\n  ctx.putImageData(imageData, 0, 0);\n}\n\n\n\nanimate(texture_data, radius);\n\nfunction animate(texture_data, radius) {\n  ctx.fillStyle = \"black\";\n  ctx.fillRect(0, 0, 700, 700);\n\n  var w = heightmap_width,\n    h = heightmap_height;\n  var imageData = ctx.createImageData(700, 700);\n  var data = imageData.data;\n\n  //Draw space and stars\n  // for (var x = 0; x < 700; x++) {\n  //   for (var y = 0; y < 700; y++) {\n  //     setColor(data, x, y, 700, 0, 0, 0, 255);\n  //   }\n  // }\n  // for (var s = 0; s < stars.length; s++) {\n  //   var star = stars[s];\n\n  //   setColor(data, star[0], star[1], 700, 255, 255, 255, 255);\n  // }\n\n  if (withAsteroids) {\n    var orbitAnglePerFrame = -0.03;\n    var astXYZ = [];\n    for (var a = 0; a < asteroids.length; a++) {\n      var asteroid = asteroids[a];\n      var astX = asteroid[0] * Math.cos(orbitAngle) - asteroid[2] * Math.sin(orbitAngle);\n      var astZ = asteroid[0] * Math.sin(orbitAngle) + asteroid[2] * Math.cos(orbitAngle);\n\n      astX = Math.round(astX) + 250;\n      var astY = Math.round(asteroid[1] * Math.cos(orbitInclinationAngle) - astZ * Math.sin(orbitInclinationAngle)) + 250;\n      astZ = Math.round(asteroid[1] * Math.sin(orbitInclinationAngle) + astZ * Math.cos(orbitInclinationAngle));\n\n      astXYZ.push(astX, astY, astZ);\n    }\n    orbitAngle += orbitAnglePerFrame;\n\n    for (var a = 0; a < astXYZ.length; a += 3) {\n      if (astXYZ[a + 2] < 0) {\n        setColor(data, astXYZ[a], astXYZ[a + 1], 700, asteroids[a / 3][4], asteroids[a / 3][5], asteroids[a / 3][6], 255, asteroids[a / 3][7]);\n      }\n    }\n  }\n\n  render_planet(data, texture_data, radius, w, h, 0, w, (3.0 / 2.0) * Math.PI, -Math.PI / 2.0);\n  // render_planet(data, texture_data, radius, w, h, 0, Math.round(w/4), (3.0/2.0)*Math.PI, Math.PI);\n  // render_planet(data, texture_data, radius, w, h, w-Math.round(w/4), w, 0, -Math.PI/2.0);\n  // render_planet(data, texture_data, radius, w, h, Math.round(w/4), w-Math.round(w/4), Math.PI, 0);\n\n  if (withAsteroids) {\n    for (var a = 0; a < astXYZ.length; a += 3) {\n      if (astXYZ[a + 2] >= 0) {\n        setColor(data, astXYZ[a], astXYZ[a + 1], 700, asteroids[a / 3][4], asteroids[a / 3][5], asteroids[a / 3][6], 255, asteroids[a / 3][7]);\n      }\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0);\n\n  dphi -= planetRotationDiff + rotationMomentum;\n  //rotationMomentum *= 0.90;\n  if (mouseDown) {\n    dphi -= mouseDiff.x * 0.005;\n  }\n  // if(justReleasedMouse){\n  // \trotationMomentum = mouseDiff.x > 0 ? 1 : -1;\n  // \tjustReleasedMouse = false;\n  // }\n\n  window.requestAnimationFrame(function () {\n    animate(texture_data, radius);\n  });\n\n}\n\nfunction render_planet(canvas_data, texture_data, radius, w, h, x1, x2, angle1, angle2) {\n  for (var x = x1; x < x2; x++) {\n    for (var y = 0; y < h; y++) {\n      var phi = map(x, x1, x2, angle1 + dphi, angle2 + dphi),\n        theta = map(y, 0, h - 1, Math.PI, 0);\n\n      var r = texture_data[(x + y * w) * 4],\n        g = texture_data[(x + y * w) * 4 + 1],\n        b = texture_data[(x + y * w) * 4 + 2],\n        a = texture_data[(x + y * w) * 4 + 3];\n\n      var rad = radius;\n\n      var zz = rad * Math.abs(Math.sin(theta)) * Math.sin(phi),\n        xx = Math.round(rad * Math.abs(Math.sin(theta)) * Math.cos(phi)) + 250,\n        yy = Math.round(rad * Math.cos(theta)) + 250;\n      if (zz >= 0) {\n        setColor(canvas_data, xx, yy, 700, r, g, b, 255);\n      }\n    }\n  }\n}"]}